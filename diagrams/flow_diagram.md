# SageMaker Calculator - Flow Diagram

## Development & Deployment Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              PHASE 1: DEVELOPMENT                           │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────────────┐
    │   Developer     │    │  SageMaker      │    │   Local Testing         │
    │                 │    │   Studio        │    │                         │
    │ ┌─────────────┐ │    │                 │    │ ┌─────────────────────┐ │
    │ │ Write Code  │ │───▶│  JupyterLab     │───▶│ │ calculator_model.py │ │
    │ │             │ │    │                 │    │ │                     │ │
    │ └─────────────┘ │    │ ┌─────────────┐ │    │ └─────────────────────┘ │
    └─────────────────┘    │ │ Notebooks   │ │    │ ┌─────────────────────┐ │
                           │ │             │ │    │ │   inference.py      │ │
                           │ └─────────────┘ │    │ │                     │ │
                           └─────────────────┘    │ └─────────────────────┘ │
                                                  └─────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              PHASE 2: PACKAGING                             │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────────────┐
    │   Create Tar    │    │   Upload to     │    │    Model Registry       │
    │                 │    │      S3         │    │                         │
    │ ┌─────────────┐ │    │                 │    │ ┌─────────────────────┐ │
    │ │model.tar.gz │ │───▶│  S3 Bucket      │───▶│ │   SKLearn Model     │ │
    │ │             │ │    │                 │    │ │                     │ │
    │ │ ├─inference  │ │    │ ┌─────────────┐ │    │ └─────────────────────┘ │
    │ │ ├─calculator │ │    │ │ Artifacts   │ │    └─────────────────────────┘
    │ │ └─deps      │ │    │ │             │ │
    │ └─────────────┘ │    │ └─────────────┘ │
    └─────────────────┘    └─────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              PHASE 3: DEPLOYMENT                            │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────────────┐
    │  SageMaker      │    │   Endpoint      │    │    Model Server         │
    │   Service       │    │  Creation       │    │                         │
    │                 │    │                 │    │ ┌─────────────────────┐ │
    │ ┌─────────────┐ │    │ ┌─────────────┐ │    │ │   Docker Container  │ │
    │ │ Create      │ │───▶│ │ Provision   │ │───▶│ │                     │ │
    │ │ Endpoint    │ │    │ │ Instance    │ │    │ │ ┌─────────────────┐ │ │
    │ └─────────────┘ │    │ └─────────────┘ │    │ │ │ Load Model      │ │ │
    └─────────────────┘    │ ┌─────────────┐ │    │ │ │ Start Server    │ │ │
                           │ │ml.t2.medium │ │    │ │ └─────────────────┘ │ │
                           │ └─────────────┘ │    │ └─────────────────────┘ │
                           └─────────────────┘    └─────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              PHASE 4: INFERENCE                             │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────────────┐
    │    Client       │    │   SageMaker     │    │      Response           │
    │  Application    │    │   Endpoint      │    │                         │
    │                 │    │                 │    │ ┌─────────────────────┐ │
    │ ┌─────────────┐ │    │ ┌─────────────┐ │    │ │ {"operation":"add", │ │
    │ │ POST        │ │───▶│ │ Process     │ │───▶│ │  "result": 15,      │ │
    │ │ Request     │ │    │ │ Request     │ │    │ │  "status":"success"}│ │
    │ └─────────────┘ │    │ └─────────────┘ │    │ └─────────────────────┘ │
    └─────────────────┘    └─────────────────┘    └─────────────────────────┘
```

## Request Processing Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           REQUEST PROCESSING FLOW                           │
└─────────────────────────────────────────────────────────────────────────────┘

Client Request
      │
      ▼
┌─────────────────┐
│ {"operation":   │
│  "add",         │
│  "a": 10,       │
│  "b": 5}        │
└─────────────────┘
      │
      ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────────────┐
│   SageMaker     │    │   Model Server  │    │    inference.py         │
│   Runtime API   │    │                 │    │                         │
│                 │    │                 │    │ ┌─────────────────────┐ │
│ ┌─────────────┐ │    │ ┌─────────────┐ │    │ │   input_fn()        │ │
│ │ HTTP POST   │ │───▶│ │ Receive     │ │───▶│ │                     │ │
│ │ /invoke     │ │    │ │ Request     │ │    │ └─────────────────────┘ │
│ └─────────────┘ │    │ └─────────────┘ │    │ ┌─────────────────────┐ │
└─────────────────┘    └─────────────────┘    │ │   predict_fn()      │ │
                                              │ │                     │ │
                                              │ └─────────────────────┘ │
                                              │ ┌─────────────────────┐ │
                                              │ │   output_fn()       │ │
                                              │ │                     │ │
                                              │ └─────────────────────┘ │
                                              └─────────────────────────┘
                                                        │
                                                        ▼
                                              ┌─────────────────────────┐
                                              │  calculator_model.py    │
                                              │                         │
                                              │ ┌─────────────────────┐ │
                                              │ │ MathCalculator      │ │
                                              │ │                     │ │
                                              │ │ ┌─────────────────┐ │ │
                                              │ │ │ calculate()     │ │ │
                                              │ │ │                 │ │ │
                                              │ │ │ ├─ add()        │ │ │
                                              │ │ │ ├─ multiply()   │ │ │
                                              │ │ │ ├─ sqrt()       │ │ │
                                              │ │ │ └─ sin()        │ │ │
                                              │ │ └─────────────────┘ │ │
                                              │ └─────────────────────┘ │
                                              └─────────────────────────┘
                                                        │
                                                        ▼
                                              ┌─────────────────────────┐
                                              │      Result             │
                                              │                         │
                                              │ {"operation": "add",    │
                                              │  "input_a": 10,         │
                                              │  "input_b": 5,          │
                                              │  "result": 15,          │
                                              │  "status": "success"}   │
                                              └─────────────────────────┘
```

## File Interaction Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            FILE INTERACTION FLOW                            │
└─────────────────────────────────────────────────────────────────────────────┘

Development Phase:
    calculator_development.ipynb ──┐
                                   ├──▶ calculator_model.py
    sagemaker_deployment.ipynb ────┘     inference.py

Deployment Phase:
    deploy_model.py ────┐
                        ├──▶ model.tar.gz ──▶ S3 ──▶ SageMaker Endpoint
    deployment/*.ipynb ─┘

Testing Phase:
    test_api.py ────▶ SageMaker Endpoint ────▶ Response

Runtime Flow:
    Client ────▶ SageMaker Runtime API ────▶ Endpoint ────▶ inference.py ────▶ calculator_model.py
```

## Error Handling Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            ERROR HANDLING FLOW                              │
└─────────────────────────────────────────────────────────────────────────────┘

Request ──▶ input_fn() ──▶ Validation Error? ──Yes──▶ Error Response
    │                           │
    │                          No
    │                           ▼
    └──────────────────▶ predict_fn() ──▶ Calculation Error? ──Yes──▶ Error Response
                              │                    │
                             No                   No
                              ▼                    ▼
                        Success Response    Exception Handling
```